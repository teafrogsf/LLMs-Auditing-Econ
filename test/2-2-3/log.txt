log to file test/2-2-3/log.txt, logger name is 2-2-3
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 2, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 2, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 3, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/2-2-3'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9217
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7401
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5752
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9217
  第二好服务商1	 第二好效用：0.7401



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9207622.0
avg input_tokens: 2312.8917357447876
total output_tokens: 26655309.0
avg output_tokens: 6695.63149962321
total reported_output_tokens: 26655309.0
avg reported_output_tokens: 6695.63149962321
total reported_price: 278.06261750000004
avg reported_price: 0.0698474296659131
total costs: 250.25635575
avg costs: 0.06286268669932178
total rewards: 3947.356471671618
avg rewards: 0.9915489755517753
total user_utility: 3669.293854171618
avg user_utility: 0.9217015458858624
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9109698.0
avg input_tokens: 2288.2938960060287
total output_tokens: 33296122.0
avg output_tokens: 8363.758352172821
total reported_output_tokens: 33296122.0
avg reported_output_tokens: 8363.758352172821
total reported_price: 156.5236046
avg reported_price: 0.03931766003516704
total costs: 140.87124414000002
avg costs: 0.03538589403165034
total rewards: 3102.7181267719925
avg rewards: 0.7793815942657605
total user_utility: 2946.1945221719925
avg user_utility: 0.7400639342305935
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9746702.0
avg input_tokens: 2448.3049485054007
total output_tokens: 15324629.0
avg output_tokens: 3849.442099974881
total reported_output_tokens: 15324629.0
avg reported_output_tokens: 3849.442099974881
total reported_price: 78.1497398
avg reported_price: 0.019630680683245416
total costs: 70.33476582
avg costs: 0.017667612614920874
total rewards: 2368.008870817781
avg rewards: 0.5948276490373727
total user_utility: 2289.859131017781
avg user_utility: 0.5751969683541273
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7794, avg_output_tokens=8363.76
Phase2 delta_3 components | provider 2: avg_reward=0.5948, avg_output_tokens=3849.44
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -18.37699496048551
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -18.37699496048551) * 3981 = 903617.8975201588
  计划委托903617次，阈值：0.6313
  早停触发：最近7962次平均用户效用 0.4272 < 阈值 0.6313
  在7962次委托后停止，总provider_utility：623.8258



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 27416716.0
avg input_tokens: 2295.6305785815957
total output_tokens: 112817619.0
avg output_tokens: 9446.338357196684
total reported_output_tokens: 112817619.0
avg reported_output_tokens: 9446.338357196684
total reported_price: 1162.447085
avg reported_price: 0.09733292179519384
total costs: 422.376614604
avg costs: 0.035366039906556145
total rewards: 8233.016719241887
avg rewards: 0.6893591827214173
total user_utility: 7070.569634241889
avg user_utility: 0.5920262609262236
total provider_utility: 623.8257618960001
avg provider_utility: 0.052233589709118323


====================Provider-1 History Info:==================
total input_tokens: 9109698.0
avg input_tokens: 2288.2938960060287
total output_tokens: 33296122.0
avg output_tokens: 8363.758352172821
total reported_output_tokens: 33296122.0
avg reported_output_tokens: 8363.758352172821
total reported_price: 156.5236046
avg reported_price: 0.03931766003516704
total costs: 140.87124414000002
avg costs: 0.03538589403165034
total rewards: 3102.7181267719925
avg rewards: 0.7793815942657605
total user_utility: 2946.1945221719925
avg user_utility: 0.7400639342305935
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9746702.0
avg input_tokens: 2448.3049485054007
total output_tokens: 15324629.0
avg output_tokens: 3849.442099974881
total reported_output_tokens: 15324629.0
avg reported_output_tokens: 3849.442099974881
total reported_price: 78.1497398
avg reported_price: 0.019630680683245416
total costs: 70.33476582
avg costs: 0.017667612614920874
total rewards: 2368.008870817781
avg rewards: 0.5948276490373727
total user_utility: 2289.859131017781
avg user_utility: 0.5751969683541273
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 27416716.0
avg input_tokens: 2295.6305785815957
total output_tokens: 112817619.0
avg output_tokens: 9446.338357196684
total reported_output_tokens: 112817619.0
avg reported_output_tokens: 9446.338357196684
total reported_price: 1162.447085
avg reported_price: 0.09733292179519384
total costs: 422.376614604
avg costs: 0.035366039906556145
total rewards: 8233.016719241887
avg rewards: 0.6893591827214173
total user_utility: 7070.569634241889
avg user_utility: 0.5920262609262236
total provider_utility: 623.8257618960001
avg provider_utility: 0.052233589709118323


====================Provider-1 History Info:==================
total input_tokens: 18219300.0
avg input_tokens: 2288.2818387339867
total output_tokens: 76485610.0
avg output_tokens: 9606.331323787994
total reported_output_tokens: 184805020.0
avg reported_output_tokens: 23210.87917608641
total reported_price: 833.1833180000001
avg reported_price: 0.10464497839738761
total costs: 227.14553484
avg costs: 0.028528703195177092
total rewards: 5202.832189837746
avg rewards: 0.6534579489874085
total user_utility: 4369.648871837746
avg user_utility: 0.5488129705900209
total provider_utility: 522.71945136
avg provider_utility: 0.06565177736247174


====================Provider-2 History Info:==================
total input_tokens: 18830354.0
avg input_tokens: 2365.0281336347653
total output_tokens: 58335359.0
avg output_tokens: 7326.721803566943
total reported_output_tokens: 166833527.0
avg reported_output_tokens: 20953.72104998744
total reported_price: 754.7809082000001
avg reported_price: 0.094797903566943
total costs: 156.253454802
avg costs: 0.019624900125847777
total rewards: 4564.414653850083
avg rewards: 0.5732748874466318
total user_utility: 3809.6337456500833
avg user_utility: 0.47847698387968896
total provider_utility: 523.049362578
avg provider_utility: 0.0656932130844009



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.008486936829415604, log_avg_output_tokens=8.809210577743238, avg_output_tokens/L = 0.1759323006890328, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9915489755517753, avg_output_tokens: 6695.63149962321, delta: 2.202210377113269
delta: 2.202210377113269
provider 0: 计划委托次数 8766 (整数部分)
provider 0: 被委托了8766次: 收了provider_utility:2834.9119182780005
provider 0: 小数部分触发，追加委托 1 次
狗运：provider 0  被委托了8766次: 收了provider_utility:0.32194975500000006 
for provider 1: log_avg_reward=-0.24925450161713694, log_avg_output_tokens=9.031663168712319, avg_output_tokens/L = 0.21976347554187875, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7793815942657605, avg_output_tokens: 8363.758352172821, delta: 1.6951590465036204
delta: 1.6951590465036204
provider 1: 计划委托次数 6748 (整数部分)
provider 1: 被委托了6748次: 收了provider_utility:885.8994573780001
for provider 2: log_avg_reward=-0.5194835808810639, log_avg_output_tokens=8.25568350768406, avg_output_tokens/L = 0.10114672604905357, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5948276490373727, avg_output_tokens: 3849.442099974881, delta: 2.319526377760779
delta: 2.319526377760779
provider 2: 计划委托次数 9234 (整数部分)
provider 2: 被委托了9234次: 收了provider_utility:1212.6951995939999


====================Provider-0 History Info:==================
total input_tokens: 47488670.0
avg input_tokens: 2293.030902945437
total output_tokens: 208052722.0
avg output_tokens: 10046.00299372284
total reported_output_tokens: 446472105.0
avg reported_output_tokens: 21558.286093674553
total reported_price: 4524.0818875
avg reported_price: 0.21844914956542735
total costs: 612.614068821
avg costs: 0.029580592410478033
total rewards: 12990.53541465122
avg rewards: 0.6272590736190835
total user_utility: 8466.45352715122
avg user_utility: 0.4088099240536562
total provider_utility: 3459.059629929001
avg provider_utility: 0.16702364219840662


====================Provider-1 History Info:==================
total input_tokens: 33654676.0
avg input_tokens: 2287.877362338545
total output_tokens: 149760916.0
avg output_tokens: 10180.891638341265
total reported_output_tokens: 441620404.0
avg reported_output_tokens: 30021.7813732155
total reported_price: 1980.1499211999999
avg reported_price: 0.1346125031407206
total costs: 373.516020342
avg costs: 0.02539197962895989
total rewards: 8814.19668689827
avg rewards: 0.5991975993812557
total user_utility: 6834.046765698271
avg user_utility: 0.46458509624053507
total provider_utility: 1408.6189087380003
avg provider_utility: 0.09575927319768866


====================Provider-2 History Info:==================
total input_tokens: 39940517.0
avg input_tokens: 2322.6632356361943
total output_tokens: 158384657.0
avg output_tokens: 9210.552279599908
total reported_output_tokens: 518261099.0
avg reported_output_tokens: 30138.46819027681
total reported_price: 2324.2834043000003
avg reported_price: 0.1351641895964178
total costs: 356.110501698
avg costs: 0.020708914962665737
total rewards: 9521.564133669444
avg rewards: 0.5537080794178556
total user_utility: 7197.280729369443
avg user_utility: 0.41854388982143775
total provider_utility: 1735.7445621719999
avg provider_utility: 0.10093885567411025



====================phase3_utility_based end====================
