log to file test/0-4-0/log.txt, logger name is 0-4-0
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 0, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 4, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/0-4-0'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [1, 2, 0]
Provider 0 avg_user_utility: 0.9212
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.3564
Provider 1 avg_provider_utility: 0.1314
Provider 2 avg_user_utility: 0.5758
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9212
  第二好服务商2	 第二好效用：0.5758



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9182532.0
avg input_tokens: 2306.5892991710625
total output_tokens: 26597313.0
avg output_tokens: 6681.063300678222
total reported_output_tokens: 26597313.0
avg reported_output_tokens: 6681.063300678222
total reported_price: 277.451295
avg reported_price: 0.06969386963074604
total costs: 249.70616550000005
avg costs: 0.06272448266767146
total rewards: 3944.8280670160048
avg rewards: 0.9909138575774943
total user_utility: 3667.376772016005
avg user_utility: 0.9212199879467483
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9084822.0
avg input_tokens: 2282.045214770158
total output_tokens: 42959122.0
avg output_tokens: 10791.037930168299
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6324554
avg reported_price: 0.1699654497362472
total costs: 85.81711703399999
avg costs: 0.021556673457422754
total rewards: 2095.6529468132717
avg rewards: 0.5264137017868052
total user_utility: 1419.0204914132717
avg user_utility: 0.3564482520505581
total provider_utility: 523.152092826
avg provider_utility: 0.1314122313051997


====================Provider-2 History Info:==================
total input_tokens: 9775022.0
avg input_tokens: 2455.418739010299
total output_tokens: 15286891.0
avg output_tokens: 3839.962572218036
total reported_output_tokens: 15286891.0
avg reported_output_tokens: 3839.962572218036
total reported_price: 78.0148446
avg reported_price: 0.019596795930670687
total costs: 70.21336014
avg costs: 0.01763711633760362
total rewards: 2370.088465748745
avg rewards: 0.5953500290752939
total user_utility: 2292.073621148745
avg user_utility: 0.5757532331446232
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.5264, avg_output_tokens=38058.00
Phase2 delta_3 components | provider 2: avg_reward=0.5954, avg_output_tokens=3839.96
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.061255766873856
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.061255766873856) * 3981 = 914303.9397903908
  计划委托914303次，阈值：0.4670
  在914303次委托后停止，总provider_utility：257200.1506
 奖励在3981次委托后停止，总provider utility：1287.6638



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 2136900258.0
avg input_tokens: 2317.0132857692747
total output_tokens: 6134270108.0
avg output_tokens: 6651.309664792657
total reported_output_tokens: 34820444505.0
avg reported_output_tokens: 37755.35719668425
total reported_price: 350875.57037250005
avg reported_price: 0.3804498385740541
total costs: 57300.19887895204
avg costs: 0.06212986384493832
total rewards: 912392.4665210017
avg rewards: 0.9892953397570131
total user_utility: 561516.8961485011
avg user_utility: 0.6088455011829583
total provider_utility: 258487.81445629802
avg provider_utility: 0.2802749908717104


====================Provider-1 History Info:==================
total input_tokens: 9084822.0
avg input_tokens: 2282.045214770158
total output_tokens: 42959122.0
avg output_tokens: 10791.037930168299
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6324554
avg reported_price: 0.1699654497362472
total costs: 85.81711703399999
avg costs: 0.021556673457422754
total rewards: 2095.6529468132717
avg rewards: 0.5264137017868052
total user_utility: 1419.0204914132717
avg user_utility: 0.3564482520505581
total provider_utility: 523.152092826
avg provider_utility: 0.1314122313051997


====================Provider-2 History Info:==================
total input_tokens: 9775022.0
avg input_tokens: 2455.418739010299
total output_tokens: 15286891.0
avg output_tokens: 3839.962572218036
total reported_output_tokens: 15286891.0
avg reported_output_tokens: 3839.962572218036
total reported_price: 78.0148446
avg reported_price: 0.019596795930670687
total costs: 70.21336014
avg costs: 0.01763711633760362
total rewards: 2370.088465748745
avg rewards: 0.5953500290752939
total user_utility: 2292.073621148745
avg user_utility: 0.5757532331446232
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 2136900258.0
avg input_tokens: 2317.0132857692747
total output_tokens: 6134270108.0
avg output_tokens: 6651.309664792657
total reported_output_tokens: 34820444505.0
avg reported_output_tokens: 37755.35719668425
total reported_price: 350875.57037250005
avg reported_price: 0.3804498385740541
total costs: 57300.19887895204
avg costs: 0.06212986384493832
total rewards: 912392.4665210017
avg rewards: 0.9892953397570131
total user_utility: 561516.8961485011
avg user_utility: 0.6088455011829583
total provider_utility: 258487.81445629802
avg provider_utility: 0.2802749908717104


====================Provider-1 History Info:==================
total input_tokens: 18186159.0
avg input_tokens: 2284.119442351168
total output_tokens: 86069915.0
avg output_tokens: 10810.087289625722
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2830773
avg reported_price: 0.1699677313865863
total costs: 171.93525849899999
avg costs: 0.021594481097588544
total rewards: 4237.2624448041715
avg rewards: 0.5321856876167008
total user_utility: 2883.9793675041715
avg user_utility: 0.3622179562301145
total provider_utility: 1046.0195110710001
avg provider_utility: 0.13137647715033912


====================Provider-2 History Info:==================
total input_tokens: 18877844.0
avg input_tokens: 2370.992715398141
total output_tokens: 58760001.0
avg output_tokens: 7380.055388093444
total reported_output_tokens: 166795789.0
avg reported_output_tokens: 20948.981286109018
total reported_price: 754.6671
avg reported_price: 0.09478360964581764
total costs: 157.045815522
avg costs: 0.01972441792539563
total rewards: 4499.260350144292
avg rewards: 0.5650917294830811
total user_utility: 3744.5932501442917
avg user_utility: 0.47030811983726345
total provider_utility: 522.154574478
avg provider_utility: 0.06558083075584024



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.009127673175536304, log_avg_output_tokens=8.807032430611654, avg_output_tokens/L = 0.1755495112900894, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9909138575774943, avg_output_tokens: 6681.063300678222, delta: 2.2041305772976756
delta: 2.2041305772976756
provider 0: 计划委托次数 8774 (整数部分)
provider 0: 被委托了8774次: 收了provider_utility:2838.1585236660003
provider 0: 小数部分触发，追加委托 1 次
狗运：provider 0  被委托了8774次: 收了provider_utility:0.3263517 
for provider 1: log_avg_reward=-0.641667870079531, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.5264137017868052, avg_output_tokens: 38058.0, delta: -0.9926942685665274
delta: -0.9926942685665274
provider 1: delta<=0，不进行委托
for provider 2: log_avg_reward=-0.5186057622476419, log_avg_output_tokens=8.253217898716052, avg_output_tokens/L = 0.10089764496868033, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5953500290752939, avg_output_tokens: 3839.962572218036, delta: 2.323118886442581
delta: 2.323118886442581
provider 2: 计划委托次数 9248 (整数部分)
provider 2: 被委托了9248次: 收了provider_utility:1214.1949948650001
provider 2: 小数部分触发，追加委托 1 次
狗运：provider 2  被委托了9248次: 收了provider_utility:0.127058571 


====================Provider-0 History Info:==================
total input_tokens: 2156989248.0
avg input_tokens: 2316.752500429627
total output_tokens: 6229254672.0
avg output_tokens: 6690.641295755285
total reported_output_tokens: 35154403455.0
avg reported_output_tokens: 37758.20958820244
total reported_price: 354240.27111000003
avg reported_price: 0.38047803650756146
total costs: 57489.944667336036
avg costs: 0.0617480931725125
total rewards: 917067.6811897735
avg rewards: 0.9849927835428912
total user_utility: 562827.4100797729
avg user_utility: 0.6045147470353293
total provider_utility: 261326.299331664
avg provider_utility: 0.28068213968429284


====================Provider-1 History Info:==================
total input_tokens: 18186159.0
avg input_tokens: 2284.119442351168
total output_tokens: 86069915.0
avg output_tokens: 10810.087289625722
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2830773
avg reported_price: 0.1699677313865863
total costs: 171.93525849899999
avg costs: 0.021594481097588544
total rewards: 4237.2624448041715
avg rewards: 0.5321856876167008
total user_utility: 2883.9793675041715
avg user_utility: 0.3622179562301145
total provider_utility: 1046.0195110710001
avg provider_utility: 0.13137647715033912


====================Provider-2 History Info:==================
total input_tokens: 40052657.0
avg input_tokens: 2327.15455232119
total output_tokens: 159159197.0
avg output_tokens: 9247.527569577596
total reported_output_tokens: 518794231.0
avg reported_output_tokens: 30143.177677066993
total reported_price: 2326.7525391000004
avg reported_price: 0.1351898517866481
total costs: 357.600657276
avg costs: 0.020777447985358202
total rewards: 9437.33486229521
avg rewards: 0.5483315822610663
total user_utility: 7110.58232319521
avg user_utility: 0.4131417304744181
total provider_utility: 1736.4766279140001
avg provider_utility: 0.10089341862262508



====================phase3_utility_based end====================
