log to file test/4-1-1/log.txt, logger name is 4-1-1
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 4, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 1, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 1, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/4-1-1'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [0, 2, 1]
Provider 0 avg_user_utility: 0.1444
Provider 0 avg_provider_utility: 0.3235
Provider 1 avg_user_utility: 0.7410
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5647
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：1，平均效用：0.7410
  第二好服务商2	 第二好效用：0.5647



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9112092.0
avg input_tokens: 2288.8952524491333
total output_tokens: 42999309.0
avg output_tokens: 10801.132629992464
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4790950000001
avg reported_price: 0.38344111906556144
total costs: 85.89976163099999
avg costs: 0.021577433215523734
total rewards: 2101.500587454972
avg rewards: 0.5278825891622637
total user_utility: 575.0214924549718
avg user_utility: 0.1444414700967023
total provider_utility: 1287.9314238690001
avg provider_utility: 0.3235195739434816


====================Provider-1 History Info:==================
total input_tokens: 9127458.0
avg input_tokens: 2292.755086661643
total output_tokens: 33172337.0
avg output_tokens: 8332.664405928159
total reported_output_tokens: 33172337.0
avg reported_output_tokens: 8332.664405928159
total reported_price: 155.9984866
avg reported_price: 0.039185753981411706
total costs: 140.39863794000001
avg costs: 0.03526717858327054
total rewards: 3105.7249154645706
avg rewards: 0.7801368790415902
total user_utility: 2949.72642886457
avg user_utility: 0.7409511250601784
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9759518.0
avg input_tokens: 2451.524240140668
total output_tokens: 15294700.0
avg output_tokens: 3841.924139663401
total reported_output_tokens: 15294700.0
avg reported_output_tokens: 3841.924139663401
total reported_price: 78.03214980000001
avg reported_price: 0.0196011428786737
total costs: 70.22893482
avg costs: 0.01764102859080633
total rewards: 2326.15516023731
avg rewards: 0.5843142829031174
total user_utility: 2248.1230104373108
avg user_utility: 0.5647131400244438
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.09198493064051265
Phase2 delta_3 components | provider 0: avg_reward=0.5279, avg_output_tokens=38058.00
Phase2 delta_3 components | provider 2: avg_reward=0.5843, avg_output_tokens=3841.92
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.07774204974546
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.07774204974546) * 3981 = 914369.5716825026
  计划委托914369次，阈值：0.4727
  在914369次委托后停止，总provider_utility：0.0000
 奖励在3981次委托后停止，总provider utility：0.0000



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 9112092.0
avg input_tokens: 2288.8952524491333
total output_tokens: 42999309.0
avg output_tokens: 10801.132629992464
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4790950000001
avg reported_price: 0.38344111906556144
total costs: 85.89976163099999
avg costs: 0.021577433215523734
total rewards: 2101.500587454972
avg rewards: 0.5278825891622637
total user_utility: 575.0214924549718
avg user_utility: 0.1444414700967023
total provider_utility: 1287.9314238690001
avg provider_utility: 0.3235195739434816


====================Provider-1 History Info:==================
total input_tokens: 2110193473.0
avg input_tokens: 2287.891736263879
total output_tokens: 7710397212.0
avg output_tokens: 8359.685635634061
total reported_output_tokens: 7710397212.0
avg reported_output_tokens: 8359.685635634061
total reported_price: 36246.96055309999
avg reported_price: 0.03929929770668013
total costs: 32622.264497789998
avg costs: 0.03536936793601212
total rewards: 718213.697879506
avg rewards: 0.7786940890846193
total user_utility: 681966.7373264058
avg user_utility: 0.739394791377939
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9759518.0
avg input_tokens: 2451.524240140668
total output_tokens: 15294700.0
avg output_tokens: 3841.924139663401
total reported_output_tokens: 15294700.0
avg reported_output_tokens: 3841.924139663401
total reported_price: 78.03214980000001
avg reported_price: 0.0196011428786737
total costs: 70.22893482
avg costs: 0.01764102859080633
total rewards: 2326.15516023731
avg rewards: 0.5843142829031174
total user_utility: 2248.1230104373108
avg user_utility: 0.5647131400244438
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 0 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 18192144.0
avg input_tokens: 2284.871137905049
total output_tokens: 86076771.0
avg output_tokens: 10810.94837980407
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.91814
avg reported_price: 0.38343608892238135
total costs: 171.949525785
avg costs: 0.021596273019969855
total rewards: 4232.08862173301
avg rewards: 0.5315358731139174
total user_utility: 1179.17048173301
avg user_utility: 0.14809978419153605
total provider_utility: 2575.676800215
avg provider_utility: 0.32349620701017334


====================Provider-1 History Info:==================
total input_tokens: 2110193473.0
avg input_tokens: 2287.891736263879
total output_tokens: 7710397212.0
avg output_tokens: 8359.685635634061
total reported_output_tokens: 7710397212.0
avg reported_output_tokens: 8359.685635634061
total reported_price: 36246.96055309999
avg reported_price: 0.03929929770668013
total costs: 32622.264497789998
avg costs: 0.03536936793601212
total rewards: 718213.697879506
avg rewards: 0.7786940890846193
total user_utility: 681966.7373264058
avg user_utility: 0.739394791377939
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 19506396.0
avg input_tokens: 2449.9366993217786
total output_tokens: 30698699.0
avg output_tokens: 3855.651720673198
total reported_output_tokens: 30698699.0
avg reported_output_tokens: 3855.651720673198
total reported_price: 156.5313112
avg reported_price: 0.019659797940216026
total costs: 140.87818008
avg costs: 0.01769381814619442
total rewards: 4690.4292843996445
avg rewards: 0.5891018945490636
total user_utility: 4533.897973199644
avg user_utility: 0.5694420966088476
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.6388813890143941, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.5278825891622637, avg_output_tokens: 38058.0, delta: -0.9899077875013909
delta: -0.9899077875013909
provider 0: delta<=0，不进行委托
for provider 1: log_avg_reward=-0.24828588874360122, log_avg_output_tokens=9.027938540671695, avg_output_tokens/L = 0.21894646082106675, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7801368790415902, avg_output_tokens: 8332.664405928159, delta: 1.7006693021385935
delta: 1.7006693021385935
provider 1: 计划委托次数 6770 (整数部分)
provider 1: 被委托了6770次: 收了provider_utility:0.0
for provider 2: log_avg_reward=-0.537316285251711, log_avg_output_tokens=8.253728598121437, avg_output_tokens/L = 0.10094918649596409, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5843142829031174, avg_output_tokens: 3841.924139663401, delta: 2.3038461225058433
delta: 2.3038461225058433
provider 2: 计划委托次数 9171 (整数部分)
provider 2: 被委托了9171次: 收了provider_utility:0.0


====================Provider-0 History Info:==================
total input_tokens: 18192144.0
avg input_tokens: 2284.871137905049
total output_tokens: 86076771.0
avg output_tokens: 10810.94837980407
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.91814
avg reported_price: 0.38343608892238135
total costs: 171.949525785
avg costs: 0.021596273019969855
total rewards: 4232.08862173301
avg rewards: 0.5315358731139174
total user_utility: 1179.17048173301
avg user_utility: 0.14809978419153605
total provider_utility: 2575.676800215
avg provider_utility: 0.32349620701017334


====================Provider-1 History Info:==================
total input_tokens: 2125694168.0
avg input_tokens: 2287.9042945815363
total output_tokens: 7767163949.0
avg output_tokens: 8359.870400526961
total reported_output_tokens: 7767163949.0
avg reported_output_tokens: 8359.870400526961
total reported_price: 36513.78496039999
avg reported_price: 0.039300124486358314
total costs: 32862.40646436
avg costs: 0.03537011203772249
total rewards: 723464.6070888733
avg rewards: 0.7786716482802981
total user_utility: 686950.822128473
avg user_utility: 0.7393715237939394
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 42014494.0
avg input_tokens: 2452.2555302632345
total output_tokens: 66238803.0
avg output_tokens: 3866.153213097531
total reported_output_tokens: 66238803.0
avg reported_output_tokens: 3866.153213097531
total reported_price: 337.6666766000001
avg reported_price: 0.0197085552209187
total costs: 303.90000894
avg costs: 0.017737699698826825
total rewards: 10065.446453226348
avg rewards: 0.5874888491931564
total user_utility: 9727.779776626348
avg user_utility: 0.5677802939722377
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase3_utility_based end====================
