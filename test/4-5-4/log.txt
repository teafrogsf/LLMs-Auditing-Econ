log to file test/4-5-4/log.txt, logger name is 4-5-4
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 4, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 5, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 4, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/4-5-4'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [0, 2, 1]
Provider 0 avg_user_utility: 0.1582
Provider 0 avg_provider_utility: 0.3235
Provider 1 avg_user_utility: 0.7282
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.3716
Provider 2 avg_provider_utility: 0.1313
  阶段1完成，最佳服务商：1，平均效用：0.7282
  第二好服务商2	 第二好效用：0.3716



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9112722.0
avg input_tokens: 2289.0535041446874
total output_tokens: 43123396.0
avg output_tokens: 10832.302436573726
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4798825
avg reported_price: 0.38344131688018085
total costs: 86.14441648799999
avg costs: 0.02163888884400904
total rewards: 2156.096578830801
avg rewards: 0.5415967291712637
total user_utility: 629.6166963308007
avg user_utility: 0.15815541229108282
total provider_utility: 1287.687477762
avg provider_utility: 0.32345829634815376


====================Provider-1 History Info:==================
total input_tokens: 9082668.0
avg input_tokens: 2281.5041446872647
total output_tokens: 33015366.0
avg output_tokens: 8293.23436322532
total reported_output_tokens: 33015366.0
avg reported_output_tokens: 8293.23436322532
total reported_price: 155.25854520000001
avg reported_price: 0.038999885757347405
total costs: 139.73269068000002
avg costs: 0.03509989718161267
total rewards: 3054.385754813652
avg rewards: 0.767240832658541
total user_utility: 2899.1272096136518
avg user_utility: 0.7282409469011936
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9100422.0
avg input_tokens: 2285.9638281838734
total output_tokens: 43229473.0
avg output_tokens: 10858.948254207486
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6496154
avg reported_price: 0.16996976021100227
total costs: 86.351944455
avg costs: 0.02169101845139412
total rewards: 2155.8702113280847
avg rewards: 0.541539867201227
total user_utility: 1479.2205959280845
avg user_utility: 0.3715701069902247
total provider_utility: 522.632709405
avg provider_utility: 0.13128176573850792



====================phase2_exploitation start====================
后面的东西是：0.09198493064051265
Phase2 delta_3 components | provider 0: avg_reward=0.5416, avg_output_tokens=38058.00
Phase2 delta_3 components | provider 2: avg_reward=0.5415, avg_output_tokens=38058.00
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -24.320305369933422
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -24.320305369933422) * 3981 = 927278.2162601709
  计划委托927278次，阈值：0.2796
  在927278次委托后停止，总provider_utility：21819.7210
 奖励在3981次委托后停止，总provider utility：522.9903



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 9112722.0
avg input_tokens: 2289.0535041446874
total output_tokens: 43123396.0
avg output_tokens: 10832.302436573726
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4798825
avg reported_price: 0.38344131688018085
total costs: 86.14441648799999
avg costs: 0.02163888884400904
total rewards: 2156.096578830801
avg rewards: 0.5415967291712637
total user_utility: 629.6166963308007
avg user_utility: 0.15815541229108282
total provider_utility: 1287.687477762
avg provider_utility: 0.32345829634815376


====================Provider-1 History Info:==================
total input_tokens: 2138391701.0
avg input_tokens: 2286.4630479876823
total output_tokens: 10125260793.0
avg output_tokens: 10826.376965270947
total reported_output_tokens: 10233723466.0
avg reported_output_tokens: 10942.350055600702
total reported_price: 47380.614121499995
avg reported_price: 0.050661449597429534
total costs: 20299.841365454995
avg costs: 0.02170548882153778
total rewards: 503973.43348380225
avg rewards: 0.5388707000168964
total user_utility: 456592.81936230214
avg user_utility: 0.48820925041946683
total provider_utility: 22342.711343895004
avg provider_utility: 0.0238898158161488


====================Provider-2 History Info:==================
total input_tokens: 9100422.0
avg input_tokens: 2285.9638281838734
total output_tokens: 43229473.0
avg output_tokens: 10858.948254207486
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6496154
avg reported_price: 0.16996976021100227
total costs: 86.351944455
avg costs: 0.02169101845139412
total rewards: 2155.8702113280847
avg rewards: 0.541539867201227
total user_utility: 1479.2205959280845
avg user_utility: 0.3715701069902247
total provider_utility: 522.632709405
avg provider_utility: 0.13128176573850792



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 0 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 18219924.0
avg input_tokens: 2288.3602110022607
total output_tokens: 86326537.0
avg output_tokens: 10842.318136146696
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.952865
avg reported_price: 0.38344045026375284
total costs: 172.44531485099998
avg costs: 0.021658542432931423
total rewards: 4305.703780069476
avg rewards: 0.5407816855148802
total user_utility: 1252.7509150694757
avg user_utility: 0.1573412352511273
total provider_utility: 2575.2122636490003
avg provider_utility: 0.32343786280444614


====================Provider-1 History Info:==================
total input_tokens: 2138391701.0
avg input_tokens: 2286.4630479876823
total output_tokens: 10125260793.0
avg output_tokens: 10826.376965270947
total reported_output_tokens: 10233723466.0
avg reported_output_tokens: 10942.350055600702
total reported_price: 47380.614121499995
avg reported_price: 0.050661449597429534
total costs: 20299.841365454995
avg costs: 0.02170548882153778
total rewards: 503973.43348380225
avg rewards: 0.5388707000168964
total user_utility: 456592.81936230214
avg user_utility: 0.48820925041946683
total provider_utility: 22342.711343895004
avg provider_utility: 0.0238898158161488


====================Provider-2 History Info:==================
total input_tokens: 18198369.0
avg input_tokens: 2285.6529766390354
total output_tokens: 86365800.0
avg output_tokens: 10847.249434815372
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2965083
avg reported_price: 0.16996941827430292
total costs: 172.519986294
avg costs: 0.02166792091107762
total rewards: 4289.455967860806
avg rewards: 0.5387410158076872
total user_utility: 2936.1594595608058
avg user_utility: 0.3687715975333843
total provider_utility: 1045.446871176
avg provider_utility: 0.13130455553579504



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.6132335965986452, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.5415967291712637, avg_output_tokens: 38058.0, delta: -0.9642599950856425
delta: -0.9642599950856425
provider 0: delta<=0，不进行委托
for provider 1: log_avg_reward=-0.2649545338644701, log_avg_output_tokens=9.023195324419103, avg_output_tokens/L = 0.2179104094599117, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.767240832658541, avg_output_tokens: 8293.23436322532, delta: 1.689779924631471
delta: 1.689779924631471
provider 1: 计划委托次数 6727 (整数部分)
provider 1: 被委托了6727次: 收了provider_utility:882.847478466
for provider 2: log_avg_reward=-0.6133385916108705, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.541539867201227, avg_output_tokens: 38058.0, delta: -0.9643649900978684
delta: -0.9643649900978684
provider 2: delta<=0，不进行委托


====================Provider-0 History Info:==================
total input_tokens: 18219924.0
avg input_tokens: 2288.3602110022607
total output_tokens: 86326537.0
avg output_tokens: 10842.318136146696
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.952865
avg reported_price: 0.38344045026375284
total costs: 172.44531485099998
avg costs: 0.021658542432931423
total rewards: 4305.703780069476
avg rewards: 0.5407816855148802
total user_utility: 1252.7509150694757
avg user_utility: 0.1573412352511273
total provider_utility: 2575.2122636490003
avg provider_utility: 0.32343786280444614


====================Provider-1 History Info:==================
total input_tokens: 2153747865.0
avg input_tokens: 2286.4366426849347
total output_tokens: 10198444083.0
avg output_tokens: 10826.75304230403
total reported_output_tokens: 10489739632.0
avg reported_output_tokens: 11135.994819351421
total reported_price: 48523.9770323
avg reported_price: 0.05151345751209968
total costs: 20446.020506708996
avg costs: 0.021705665386058105
total rewards: 507597.58254426415
avg rewards: 0.5388698144884737
total user_utility: 459073.60551196407
avg user_utility: 0.48735635697637397
total provider_utility: 23225.558822361003
avg provider_utility: 0.024656446374831605


====================Provider-2 History Info:==================
total input_tokens: 18198369.0
avg input_tokens: 2285.6529766390354
total output_tokens: 86365800.0
avg output_tokens: 10847.249434815372
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2965083
avg reported_price: 0.16996941827430292
total costs: 172.519986294
avg costs: 0.02166792091107762
total rewards: 4289.455967860806
avg rewards: 0.5387410158076872
total user_utility: 2936.1594595608058
avg user_utility: 0.3687715975333843
total provider_utility: 1045.446871176
avg provider_utility: 0.13130455553579504



====================phase3_utility_based end====================
