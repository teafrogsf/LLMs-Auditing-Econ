log to file test/3-1-0/log.txt, logger name is 3-1-0
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 3, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 1, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/3-1-0'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9241
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7368
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5719
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9241
  第二好服务商1	 第二好效用：0.7368



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9244038.0
avg input_tokens: 2322.0391861341373
total output_tokens: 25998685.0
avg output_tokens: 6530.692037176589
total reported_output_tokens: 25998685.0
avg reported_output_tokens: 6530.692037176589
total reported_price: 271.5418975
avg reported_price: 0.06820946935443356
total costs: 244.38770775
avg costs: 0.061388522418990205
total rewards: 3950.297413609943
avg rewards: 0.9922877200728316
total user_utility: 3678.7555161099426
avg user_utility: 0.924078250718398
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9113403.0
avg input_tokens: 2289.224566691786
total output_tokens: 33697831.0
avg output_tokens: 8464.664908314493
total reported_output_tokens: 33697831.0
avg reported_output_tokens: 8464.664908314493
total reported_price: 158.2951997
avg reported_price: 0.03976267261994474
total costs: 142.46567973000003
avg costs: 0.035786405357950274
total rewards: 3091.5367937335163
avg rewards: 0.7765729198024407
total user_utility: 2933.2415940335163
avg user_utility: 0.7368102471824959
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9764430.0
avg input_tokens: 2452.758100979653
total output_tokens: 15484551.0
avg output_tokens: 3889.613413715147
total reported_output_tokens: 15484551.0
avg reported_output_tokens: 3889.613413715147
total reported_price: 78.8728974
avg reported_price: 0.019812332931424266
total costs: 70.98560766000001
avg costs: 0.017831099638281844
total rewards: 2355.6499537437894
avg rewards: 0.5917231735101204
total user_utility: 2276.777056343789
avg user_utility: 0.571910840578696
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7766, avg_output_tokens=8464.66
Phase2 delta_3 components | provider 2: avg_reward=0.5917, avg_output_tokens=3889.61
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -18.411918977856484
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -18.411918977856484) * 3981 = 903756.9300333126
  计划委托903756次，阈值：0.6280
  早停触发：最近7962次平均用户效用 0.6075 < 阈值 0.6280
  在7962次委托后停止，总provider_utility：2252.4442



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 27636226.0
avg input_tokens: 2314.0103826509253
total output_tokens: 78744898.0
avg output_tokens: 6593.393452231433
total reported_output_tokens: 329016481.0
avg reported_output_tokens: 27548.89734572553
total reported_price: 3324.7100925
avg reported_price: 0.2783814864355689
total costs: 739.7948362500001
avg costs: 0.06194380275056519
total rewards: 11840.671028468938
avg rewards: 0.9914318871698014
total user_utility: 8515.960935968938
avg user_utility: 0.7130504007342324
total provider_utility: 2252.4442470000004
avg provider_utility: 0.18859953504144691


====================Provider-1 History Info:==================
total input_tokens: 9113403.0
avg input_tokens: 2289.224566691786
total output_tokens: 33697831.0
avg output_tokens: 8464.664908314493
total reported_output_tokens: 33697831.0
avg reported_output_tokens: 8464.664908314493
total reported_price: 158.2951997
avg reported_price: 0.03976267261994474
total costs: 142.46567973000003
avg costs: 0.035786405357950274
total rewards: 3091.5367937335163
avg rewards: 0.7765729198024407
total user_utility: 2933.2415940335163
avg user_utility: 0.7368102471824959
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9764430.0
avg input_tokens: 2452.758100979653
total output_tokens: 15484551.0
avg output_tokens: 3889.613413715147
total reported_output_tokens: 15484551.0
avg reported_output_tokens: 3889.613413715147
total reported_price: 78.8728974
avg reported_price: 0.019812332931424266
total costs: 70.98560766000001
avg costs: 0.017831099638281844
total rewards: 2355.6499537437894
avg rewards: 0.5917231735101204
total user_utility: 2276.777056343789
avg user_utility: 0.571910840578696
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 27636226.0
avg input_tokens: 2314.0103826509253
total output_tokens: 78744898.0
avg output_tokens: 6593.393452231433
total reported_output_tokens: 329016481.0
avg reported_output_tokens: 27548.89734572553
total reported_price: 3324.7100925
avg reported_price: 0.2783814864355689
total costs: 739.7948362500001
avg costs: 0.06194380275056519
total rewards: 11840.671028468938
avg rewards: 0.9914318871698014
total user_utility: 8515.960935968938
avg user_utility: 0.7130504007342324
total provider_utility: 2252.4442470000004
avg provider_utility: 0.18859953504144691


====================Provider-1 History Info:==================
total input_tokens: 18215976.0
avg input_tokens: 2287.8643556895254
total output_tokens: 66791715.0
avg output_tokens: 8388.811228334589
total reported_output_tokens: 66791715.0
avg reported_output_tokens: 8388.811228334589
total reported_price: 313.9211196
avg reported_price: 0.03942742019593067
total costs: 282.52900764000003
avg costs: 0.03548467817633761
total rewards: 6203.532899791927
avg rewards: 0.7791425395367906
total user_utility: 5889.611780191926
avg user_utility: 0.7397151193408599
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 18858327.0
avg input_tokens: 2368.541446872645
total output_tokens: 58475054.0
avg output_tokens: 7344.267018337101
total reported_output_tokens: 166993449.0
avg reported_output_tokens: 20973.806706857573
total reported_price: 755.5153353000001
avg reported_price: 0.09489014510173324
total costs: 156.86572009500003
avg costs: 0.019701798555011307
total rewards: 4531.231973638518
avg rewards: 0.5691072561716299
total user_utility: 3775.716638338518
avg user_utility: 0.4742171110698967
total provider_utility: 523.098081675
avg provider_utility: 0.06569933203654861



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.0077421733548490084, log_avg_output_tokens=8.784268194783307, avg_output_tokens/L = 0.17159840341522384, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9922877200728316, avg_output_tokens: 6530.692037176589, delta: 2.232231420821576
delta: 2.232231420821576
provider 0: 计划委托次数 8886 (整数部分)
provider 0: 被委托了8886次: 收了provider_utility:2873.8644253470006
provider 0: 小数部分触发，追加委托 1 次
狗运：provider 0  被委托了8886次: 收了provider_utility:0.32082291000000007 
for provider 1: log_avg_reward=-0.25286473249285785, log_avg_output_tokens=9.043655708233144, avg_output_tokens/L = 0.22241486437318023, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7765729198024407, avg_output_tokens: 8464.664908314493, delta: 1.6769048872757728
delta: 1.6769048872757728
provider 1: 计划委托次数 6675 (整数部分)
provider 1: 被委托了6675次: 收了provider_utility:0.0
provider 1: 小数部分触发，追加委托 1 次
狗运：provider 1  被委托了6675次: 收了provider_utility:0.0 
for provider 2: log_avg_reward=-0.5247163657768502, log_avg_output_tokens=8.266065052166347, avg_output_tokens/L = 0.1022022548141034, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5917231735101204, avg_output_tokens: 3889.613413715147, delta: 2.302856519617655
delta: 2.302856519617655
provider 2: 计划委托次数 9167 (整数部分)
provider 2: 被委托了9167次: 收了provider_utility:1205.009362476


====================Provider-0 History Info:==================
total input_tokens: 47952365.0
avg input_tokens: 2302.0818530964953
total output_tokens: 175195222.0
avg output_tokens: 8410.716370619299
total reported_output_tokens: 667237927.0
avg reported_output_tokens: 32032.54570331253
total reported_price: 6732.31972625
avg reported_price: 0.3232030593494959
total costs: 932.4582583680002
avg costs: 0.044765158827076344
total rewards: 16628.07595446865
avg rewards: 0.7982753698736751
total user_utility: 9895.756228218652
avg user_utility: 0.47507231052417914
total provider_utility: 5126.629495257001
avg provider_utility: 0.24611759458747


====================Provider-1 History Info:==================
total input_tokens: 33466634.0
avg input_tokens: 2286.2846017215466
total output_tokens: 122825721.0
avg output_tokens: 8390.881336248121
total reported_output_tokens: 122825721.0
avg reported_output_tokens: 8390.881336248121
total reported_price: 577.2464698
avg reported_price: 0.03943479094138543
total costs: 519.5218228200001
avg costs: 0.0354913118472469
total rewards: 11372.519673607421
avg rewards: 0.7769175893979656
total user_utility: 10795.273203807421
avg user_utility: 0.7374827984565802
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 39823676.0
avg input_tokens: 2324.927082725203
total output_tokens: 157237274.0
avg output_tokens: 9179.59448887851
total reported_output_tokens: 515871135.0
avg reported_output_tokens: 30116.827310409248
total reported_price: 2313.6390376
avg reported_price: 0.1350714599567984
total costs: 354.167689689
avg costs: 0.0206764953989725
total rewards: 9482.032880689683
avg rewards: 0.5535660505977981
total user_utility: 7168.393843089684
avg user_utility: 0.4184945906409997
total provider_utility: 1728.1074441510002
avg provider_utility: 0.10088781856214608



====================phase3_utility_based end====================
