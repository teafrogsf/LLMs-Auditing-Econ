log to file test/5-0-4/log.txt, logger name is 5-0-4
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 5, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 4, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/5-0-4'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9235
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7416
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.3609
Provider 2 avg_provider_utility: 0.1313
  阶段1完成，最佳服务商：0，平均效用：0.9235
  第二好服务商1	 第二好效用：0.7416



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9211368.0
avg input_tokens: 2313.8327053504145
total output_tokens: 26149077.0
avg output_tokens: 6568.469480030143
total reported_output_tokens: 26149077.0
avg reported_output_tokens: 6568.469480030143
total reported_price: 273.00498
avg reported_price: 0.06857698568198944
total costs: 245.70448200000004
avg costs: 0.061719287113790516
total rewards: 3949.6379155702352
avg rewards: 0.9921220586712473
total user_utility: 3676.6329355702355
avg user_utility: 0.9235450729892578
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9096708.0
avg input_tokens: 2285.030896759608
total output_tokens: 33059711.0
avg output_tokens: 8304.37352424014
total reported_output_tokens: 33059711.0
avg reported_output_tokens: 8304.37352424014
total reported_price: 155.4691072
avg reported_price: 0.03905277749309219
total costs: 139.92219648
avg costs: 0.03514749974378297
total rewards: 3107.969979046178
avg rewards: 0.7807008236739961
total user_utility: 2952.5008718461777
avg user_utility: 0.7416480461809037
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9097437.0
avg input_tokens: 2285.214016578749
total output_tokens: 43132355.0
avg output_tokens: 10834.552876161768
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6463319
avg reported_price: 0.1699689354182366
total costs: 86.16014876699998
avg costs: 0.021642840685003762
total rewards: 2113.447921212331
avg rewards: 0.5308836777725021
total user_utility: 1436.801589312331
avg user_utility: 0.3609147423542655
total provider_utility: 522.821549943
avg provider_utility: 0.1313292011914092



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7807, avg_output_tokens=8304.37
Phase2 delta_3 components | provider 2: avg_reward=0.5309, avg_output_tokens=38058.00
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.670382890163133
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.670382890163133) * 3981 = 916728.8748682054
  计划委托916728次，阈值：0.6329
  在916728次委托后停止，总provider_utility：0.0000
 奖励在3981次委托后停止，总provider utility：1287.6778



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 2142216798.0
avg input_tokens: 2316.6864549200272
total output_tokens: 6146838586.0
avg output_tokens: 6647.458700753766
total reported_output_tokens: 6255221146.0
avg reported_output_tokens: 6764.6683169494645
total reported_price: 65229.98245750001
avg reported_price: 0.07054254123814468
total costs: 57419.30644375503
avg costs: 0.06209573634813292
total rewards: 914856.1180850887
avg rewards: 0.9893652122171632
total user_utility: 849626.1356275885
avg user_utility: 0.9188226709790184
total provider_utility: 1287.6777679950003
avg provider_utility: 0.0013925507661973204


====================Provider-1 History Info:==================
total input_tokens: 9096708.0
avg input_tokens: 2285.030896759608
total output_tokens: 33059711.0
avg output_tokens: 8304.37352424014
total reported_output_tokens: 33059711.0
avg reported_output_tokens: 8304.37352424014
total reported_price: 155.4691072
avg reported_price: 0.03905277749309219
total costs: 139.92219648
avg costs: 0.03514749974378297
total rewards: 3107.969979046178
avg rewards: 0.7807008236739961
total user_utility: 2952.5008718461777
avg user_utility: 0.7416480461809037
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9097437.0
avg input_tokens: 2285.214016578749
total output_tokens: 43132355.0
avg output_tokens: 10834.552876161768
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6463319
avg reported_price: 0.1699689354182366
total costs: 86.16014876699998
avg costs: 0.021642840685003762
total rewards: 2113.447921212331
avg rewards: 0.5308836777725021
total user_utility: 1436.801589312331
avg user_utility: 0.3609147423542655
total provider_utility: 522.821549943
avg provider_utility: 0.1313292011914092



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 2142216798.0
avg input_tokens: 2316.6864549200272
total output_tokens: 6146838586.0
avg output_tokens: 6647.458700753766
total reported_output_tokens: 6255221146.0
avg reported_output_tokens: 6764.6683169494645
total reported_price: 65229.98245750001
avg reported_price: 0.07054254123814468
total costs: 57419.30644375503
avg costs: 0.06209573634813292
total rewards: 914856.1180850887
avg rewards: 0.9893652122171632
total user_utility: 849626.1356275885
avg user_utility: 0.9188226709790184
total provider_utility: 1287.6777679950003
avg provider_utility: 0.0013925507661973204


====================Provider-1 History Info:==================
total input_tokens: 18206430.0
avg input_tokens: 2286.665410700829
total output_tokens: 76151986.0
avg output_tokens: 9564.429289123336
total reported_output_tokens: 184568609.0
avg reported_output_tokens: 23181.18676212007
total reported_price: 832.1289526
avg reported_price: 0.10451255370509922
total costs: 226.004895477
avg costs: 0.02838544278786737
total rewards: 5225.588153758923
avg rewards: 0.6563160203163682
total user_utility: 4393.459201158923
avg user_utility: 0.5518034666112689
total provider_utility: 522.911161863
avg provider_utility: 0.06567585554672192


====================Provider-2 History Info:==================
total input_tokens: 18198819.0
avg input_tokens: 2285.7094951017334
total output_tokens: 86012321.0
avg output_tokens: 10802.853679979904
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2970033000001
avg reported_price: 0.16996948044461194
total costs: 171.82333588499998
avg costs: 0.02158042399962321
total rewards: 4264.452247290882
avg rewards: 0.5356006339224921
total user_utility: 2911.155243990882
avg user_utility: 0.36563115347788017
total provider_utility: 1046.143967085
avg provider_utility: 0.1313921084005275



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.007909136251064977, log_avg_output_tokens=8.790036128484845, avg_output_tokens/L = 0.17259103158416478, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9921220586712473, avg_output_tokens: 6568.469480030143, delta: 2.2253038960548808
delta: 2.2253038960548808
provider 0: 计划委托次数 8858 (整数部分)
provider 0: 被委托了8858次: 收了provider_utility:2864.8864448550003
provider 0: 小数部分触发，追加委托 1 次
狗运：provider 0  被委托了8858次: 收了provider_utility:0.32687960400000005 
for provider 1: log_avg_reward=-0.24756327081098137, log_avg_output_tokens=9.024537585636836, avg_output_tokens/L = 0.21820309854012665, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7807008236739961, avg_output_tokens: 8304.37352424014, delta: 1.7055362373870113
delta: 1.7055362373870113
provider 1: 计划委托次数 6789 (整数部分)
provider 1: 被委托了6789次: 收了provider_utility:890.560353168
provider 1: 小数部分触发，追加委托 1 次
狗运：provider 1  被委托了6789次: 收了provider_utility:0.13623311700000001 
for provider 2: log_avg_reward=-0.6332123443132345, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5308836777725021, avg_output_tokens: 38058.0, delta: -0.9842387428002315
delta: -0.9842387428002315
provider 2: delta<=0，不进行委托


====================Provider-0 History Info:==================
total input_tokens: 2162518281.0
avg input_tokens: 2316.448607411073
total output_tokens: 6242967584.0
avg output_tokens: 6687.348584809153
total reported_output_tokens: 6592376968.0
avg reported_output_tokens: 7061.629296373302
total reported_price: 68626.91753125
avg reported_price: 0.07351185372299687
total costs: 57611.33468567102
avg costs: 0.06171217010105631
total rewards: 919619.5077394353
avg rewards: 0.9850789918252125
total user_utility: 850992.5902081851
avg user_utility: 0.9115671381022155
total provider_utility: 4152.8910924540005
avg provider_utility: 0.004448498249640887


====================Provider-1 History Info:==================
total input_tokens: 33721615.0
avg input_tokens: 2285.9012337310196
total output_tokens: 150239891.0
avg output_tokens: 10184.374389913231
total reported_output_tokens: 442982429.0
avg reported_output_tokens: 30028.635371475055
total reported_price: 1986.2164641
avg reported_price: 0.13464048699159437
total costs: 373.98706954200003
avg costs: 0.025351618054636663
total rewards: 8842.330358016668
avg rewards: 0.5993987498655551
total user_utility: 6856.113893916669
avg user_utility: 0.46475826287396077
total provider_utility: 1413.607748148
avg provider_utility: 0.09582482023779826


====================Provider-2 History Info:==================
total input_tokens: 18198819.0
avg input_tokens: 2285.7094951017334
total output_tokens: 86012321.0
avg output_tokens: 10802.853679979904
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2970033000001
avg reported_price: 0.16996948044461194
total costs: 171.82333588499998
avg costs: 0.02158042399962321
total rewards: 4264.452247290882
avg rewards: 0.5356006339224921
total user_utility: 2911.155243990882
avg user_utility: 0.36563115347788017
total provider_utility: 1046.143967085
avg provider_utility: 0.1313921084005275



====================phase3_utility_based end====================
