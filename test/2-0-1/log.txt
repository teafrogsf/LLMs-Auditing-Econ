log to file test/2-0-1/log.txt, logger name is 2-0-1
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 2, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 1, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/2-0-1'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9229
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7390
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5845
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9229
  第二好服务商1	 第二好效用：0.7390



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9204110.0
avg input_tokens: 2312.009545340367
total output_tokens: 26494970.0
avg output_tokens: 6655.355438332077
total reported_output_tokens: 26494970.0
avg reported_output_tokens: 6655.355438332077
total reported_price: 276.4548375
avg reported_price: 0.06944356631499624
total costs: 248.80935375000004
avg costs: 0.06249920968349662
total rewards: 3950.64986408171
avg rewards: 0.9923762532232379
total user_utility: 3674.1950265817095
avg user_utility: 0.9229326869082415
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9098838.0
avg input_tokens: 2285.565938206481
total output_tokens: 33646387.0
avg output_tokens: 8451.742527003265
total reported_output_tokens: 33646387.0
avg reported_output_tokens: 8451.742527003265
total reported_price: 158.0528246
avg reported_price: 0.0397017896508415
total costs: 142.24754214
avg costs: 0.03573161068575735
total rewards: 3100.185546540146
avg rewards: 0.778745427415259
total user_utility: 2942.1327219401455
avg user_utility: 0.7390436377644174
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9761438.0
avg input_tokens: 2452.0065310223563
total output_tokens: 15374166.0
avg output_tokens: 3861.8854559155993
total reported_output_tokens: 15374166.0
avg reported_output_tokens: 3861.8854559155993
total reported_price: 78.3839122
avg reported_price: 0.019689503190153227
total costs: 70.54552098000002
avg costs: 0.01772055287113791
total rewards: 2405.3424941006715
avg rewards: 0.6042056001257653
total user_utility: 2326.9585819006716
avg user_utility: 0.584516096935612
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7787, avg_output_tokens=8451.74
Phase2 delta_3 components | provider 2: avg_reward=0.6042, avg_output_tokens=3861.89
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -18.378499544296396
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -18.378499544296396) * 3981 = 903623.8872683098
  计划委托903623次，阈值：0.6303
  早停触发：最近7962次平均用户效用 0.4206 < 阈值 0.6303
  在7962次委托后停止，总provider_utility：625.0738



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 27433559.0
avg input_tokens: 2297.040860755254
total output_tokens: 112831946.0
avg output_tokens: 9447.537972033828
total reported_output_tokens: 112831946.0
avg reported_output_tokens: 9447.537972033828
total reported_price: 1162.6114087500002
avg reported_price: 0.09734668079628236
total costs: 421.27644402
avg costs: 0.03527392146194423
total rewards: 8185.6793833485635
avg rewards: 0.6853955776060089
total user_utility: 7023.0679745985635
avg user_utility: 0.5880488968097265
total provider_utility: 625.0738238550001
avg provider_utility: 0.05233809125470988


====================Provider-1 History Info:==================
total input_tokens: 9098838.0
avg input_tokens: 2285.565938206481
total output_tokens: 33646387.0
avg output_tokens: 8451.742527003265
total reported_output_tokens: 33646387.0
avg reported_output_tokens: 8451.742527003265
total reported_price: 158.0528246
avg reported_price: 0.0397017896508415
total costs: 142.24754214
avg costs: 0.03573161068575735
total rewards: 3100.185546540146
avg rewards: 0.778745427415259
total user_utility: 2942.1327219401455
avg user_utility: 0.7390436377644174
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9761438.0
avg input_tokens: 2452.0065310223563
total output_tokens: 15374166.0
avg output_tokens: 3861.8854559155993
total reported_output_tokens: 15374166.0
avg reported_output_tokens: 3861.8854559155993
total reported_price: 78.3839122
avg reported_price: 0.019689503190153227
total costs: 70.54552098000002
avg costs: 0.01772055287113791
total rewards: 2405.3424941006715
avg rewards: 0.6042056001257653
total user_utility: 2326.9585819006716
avg user_utility: 0.584516096935612
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 27433559.0
avg input_tokens: 2297.040860755254
total output_tokens: 112831946.0
avg output_tokens: 9447.537972033828
total reported_output_tokens: 112831946.0
avg reported_output_tokens: 9447.537972033828
total reported_price: 1162.6114087500002
avg reported_price: 0.09734668079628236
total costs: 421.27644402
avg costs: 0.03527392146194423
total rewards: 8185.6793833485635
avg rewards: 0.6853955776060089
total user_utility: 7023.0679745985635
avg user_utility: 0.5880488968097265
total provider_utility: 625.0738238550001
avg provider_utility: 0.05233809125470988


====================Provider-1 History Info:==================
total input_tokens: 18194310.0
avg input_tokens: 2285.143180105501
total output_tokens: 76992551.0
avg output_tokens: 9670.00138156242
total reported_output_tokens: 185155285.0
avg reported_output_tokens: 23254.871263501635
total reported_price: 834.696995
avg reported_price: 0.10483509105752324
total costs: 228.828860856
avg costs: 0.028740123192162775
total rewards: 5195.337830741255
avg rewards: 0.6525166830873217
total user_utility: 4360.640835741256
avg user_utility: 0.5476815920297985
total provider_utility: 522.398434644
avg provider_utility: 0.06561145875960814


====================Provider-2 History Info:==================
total input_tokens: 19531740.0
avg input_tokens: 2453.1198191409194
total output_tokens: 30721448.0
avg output_tokens: 3858.508917357448
total reported_output_tokens: 30721448.0
avg reported_output_tokens: 3858.508917357448
total reported_price: 156.6592852
avg reported_price: 0.01967587103742778
total costs: 140.99335668
avg costs: 0.017708283933685006
total rewards: 4790.455824115323
avg rewards: 0.6016648862239793
total user_utility: 4633.796538915322
avg user_utility: 0.5819890151865514
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.007652956085168906, log_avg_output_tokens=8.80317713861893, avg_output_tokens/L = 0.17487401961038618, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9923762532232379, avg_output_tokens: 6655.355438332077, delta: 2.2101360780604713
delta: 2.2101360780604713
provider 0: 计划委托次数 8798 (整数部分)
provider 0: 被委托了8798次: 收了provider_utility:2844.8435196000005
for provider 1: log_avg_reward=-0.25007108059561445, log_avg_output_tokens=9.042127915304983, avg_output_tokens/L = 0.22207531995909574, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.778745427415259, avg_output_tokens: 8451.742527003265, delta: 1.6815658765152632
delta: 1.6815658765152632
provider 1: 计划委托次数 6694 (整数部分)
provider 1: 被委托了6694次: 收了provider_utility:878.5804260330001
for provider 2: log_avg_reward=-0.5038407414102132, log_avg_output_tokens=8.258910803282847, avg_output_tokens/L = 0.10147368374364389, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.6042056001257653, avg_output_tokens: 3861.8854559155993, delta: 2.3316149639382515
delta: 2.3316149639382515
provider 2: 计划委托次数 9282 (整数部分)
provider 2: 被委托了9282次: 收了provider_utility:0.0
provider 2: 小数部分触发，追加委托 1 次
狗运：provider 2  被委托了9282次: 收了provider_utility:0.0 


====================Provider-0 History Info:==================
total input_tokens: 47537320.0
avg input_tokens: 2291.9492792054384
total output_tokens: 208594855.0
avg output_tokens: 10057.126223422207
total reported_output_tokens: 447666230.0
avg reported_output_tokens: 21583.637722385614
total reported_price: 4536.08395
avg reported_price: 0.21870131382286292
total costs: 612.5582115450001
avg costs: 0.02953368745696929
total rewards: 12842.172056560008
avg rewards: 0.6191684131218363
total user_utility: 8306.088106560006
avg user_utility: 0.40046709929897334
total provider_utility: 3469.9173434550003
avg provider_utility: 0.16729749498360735


====================Provider-1 History Info:==================
total input_tokens: 33509683.0
avg input_tokens: 2286.4139601528386
total output_tokens: 149799580.0
avg output_tokens: 10221.041211790392
total reported_output_tokens: 439915537.0
avg reported_output_tokens: 30016.07102893013
total reported_price: 1972.4890140999998
avg reported_price: 0.1345857678834607
total costs: 374.261252013
avg costs: 0.025536384553288754
total rewards: 8766.477552412998
avg rewards: 0.5981493963163891
total user_utility: 6793.988538312998
avg user_utility: 0.4635636284329283
total provider_utility: 1400.9788606770003
avg provider_utility: 0.09559080654182589


====================Provider-2 History Info:==================
total input_tokens: 42310142.0
avg input_tokens: 2453.4730066685997
total output_tokens: 66369017.0
avg output_tokens: 3848.5947810959697
total reported_output_tokens: 66369017.0
avg reported_output_tokens: 3848.5947810959697
total reported_price: 338.564831
avg reported_price: 0.019632637344157728
total costs: 304.70834790000004
avg costs: 0.017669373609741957
total rewards: 10294.514097115996
avg rewards: 0.5969564567768046
total user_utility: 9955.949266115998
avg user_utility: 0.5773238194326471
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase3_utility_based end====================
