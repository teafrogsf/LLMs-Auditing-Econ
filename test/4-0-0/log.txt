log to file test/4-0-0/log.txt, logger name is 4-0-0
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 4, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 0, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/4-0-0'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [0, 2, 1]
Provider 0 avg_user_utility: 0.1494
Provider 0 avg_provider_utility: 0.3234
Provider 1 avg_user_utility: 0.7383
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5788
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：1，平均效用：0.7383
  第二好服务商2	 第二好效用：0.5788



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9098922.0
avg input_tokens: 2285.5870384325544
total output_tokens: 43238073.0
avg output_tokens: 10861.108515448379
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4626325000002
avg reported_price: 0.38343698379804075
total costs: 86.36870605499999
avg costs: 0.021695228850791257
total rewards: 2121.172950016907
avg rewards: 0.5328241522273065
total user_utility: 594.7103175169071
avg user_utility: 0.1493871684292658
total provider_utility: 1287.4476631950001
avg provider_utility: 0.3233980565674454


====================Provider-1 History Info:==================
total input_tokens: 9101463.0
avg input_tokens: 2286.2253202712886
total output_tokens: 33308951.0
avg output_tokens: 8366.980909319267
total reported_output_tokens: 33308951.0
avg reported_output_tokens: 8366.980909319267
total reported_price: 156.57099370000003
avg reported_price: 0.0393295638533032
total costs: 140.91389433
avg costs: 0.03539660746797287
total rewards: 3095.646166335916
avg rewards: 0.7776051661230635
total user_utility: 2939.075172635916
avg user_utility: 0.7382756022697603
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9765326.0
avg input_tokens: 2452.9831700577743
total output_tokens: 15382597.0
avg output_tokens: 3864.003265511178
total reported_output_tokens: 15382597.0
avg reported_output_tokens: 3864.003265511178
total reported_price: 78.4252854
avg reported_price: 0.019699895855312736
total costs: 70.58275686000002
avg costs: 0.017729906269781465
total rewards: 2382.4809936782012
avg rewards: 0.5984629474197943
total user_utility: 2304.0557082782016
avg user_utility: 0.5787630515644817
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.09198493064051265
Phase2 delta_3 components | provider 0: avg_reward=0.5328, avg_output_tokens=38058.00
Phase2 delta_3 components | provider 2: avg_reward=0.5985, avg_output_tokens=3864.00
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.05080945694595
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.05080945694595) * 3981 = 914262.3530305678
  计划委托914262次，阈值：0.4868
  在914262次委托后停止，总provider_utility：107527.6052
 奖励在3981次委托后停止，总provider utility：522.5596



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 9098922.0
avg input_tokens: 2285.5870384325544
total output_tokens: 43238073.0
avg output_tokens: 10861.108515448379
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 1526.4626325000002
avg reported_price: 0.38343698379804075
total costs: 86.36870605499999
avg costs: 0.021695228850791257
total rewards: 2121.172950016907
avg rewards: 0.5328241522273065
total user_utility: 594.7103175169071
avg user_utility: 0.1493871684292658
total provider_utility: 1287.4476631950001
avg provider_utility: 0.3233980565674454


====================Provider-1 History Info:==================
total input_tokens: 2109441321.0
avg input_tokens: 2287.341601389684
total output_tokens: 7717980696.0
avg output_tokens: 8368.87859782439
total reported_output_tokens: 34979650844.0
avg reported_output_tokens: 37929.668761602385
total reported_price: 156230.8491667001
avg reported_price: 0.16940661831257925
total costs: 32557.599396728998
avg costs: 0.03530335297794136
total rewards: 716628.2937495623
avg rewards: 0.7770653265904621
total user_utility: 560397.4445828628
avg user_utility: 0.6076587082778835
total provider_utility: 108050.16485330099
avg provider_utility: 0.11716260350337986


====================Provider-2 History Info:==================
total input_tokens: 9765326.0
avg input_tokens: 2452.9831700577743
total output_tokens: 15382597.0
avg output_tokens: 3864.003265511178
total reported_output_tokens: 15382597.0
avg reported_output_tokens: 3864.003265511178
total reported_price: 78.4252854
avg reported_price: 0.019699895855312736
total costs: 70.58275686000002
avg costs: 0.017729906269781465
total rewards: 2382.4809936782012
avg rewards: 0.5984629474197943
total user_utility: 2304.0557082782016
avg user_utility: 0.5787630515644817
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 0 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 18208209.0
avg input_tokens: 2286.888847023361
total output_tokens: 86148257.0
avg output_tokens: 10819.92677719166
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.9382212500004
avg reported_price: 0.38343861105877924
total costs: 172.092448881
avg costs: 0.021614223672569707
total rewards: 4298.060636679613
avg rewards: 0.5398217328158268
total user_utility: 1245.1224154296124
avg user_utility: 0.15638312175704752
total provider_utility: 2575.551950244
avg provider_utility: 0.3234805262803316


====================Provider-1 History Info:==================
total input_tokens: 2109441321.0
avg input_tokens: 2287.341601389684
total output_tokens: 7717980696.0
avg output_tokens: 8368.87859782439
total reported_output_tokens: 34979650844.0
avg reported_output_tokens: 37929.668761602385
total reported_price: 156230.8491667001
avg reported_price: 0.16940661831257925
total costs: 32557.599396728998
avg costs: 0.03530335297794136
total rewards: 716628.2937495623
avg rewards: 0.7770653265904621
total user_utility: 560397.4445828628
avg user_utility: 0.6076587082778835
total provider_utility: 108050.16485330099
avg provider_utility: 0.11716260350337986


====================Provider-2 History Info:==================
total input_tokens: 18861338.0
avg input_tokens: 2368.9196181863854
total output_tokens: 58355684.0
avg output_tokens: 7329.274554132127
total reported_output_tokens: 166891495.0
avg reported_output_tokens: 20961.00163275559
total reported_price: 755.0700498
avg reported_price: 0.09483421876412962
total costs: 156.428808849
avg costs: 0.019646923995101734
total rewards: 4543.938841020132
avg rewards: 0.5707031953052163
total user_utility: 3788.868791220132
avg user_utility: 0.4758689765410867
total provider_utility: 523.134235971
avg provider_utility: 0.06570387289261491



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.6295638300264087, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.5328241522273065, avg_output_tokens: 38058.0, delta: -0.9805902285134067
delta: -0.9805902285134067
provider 0: delta<=0，不进行委托
for provider 1: log_avg_reward=-0.2515363821811976, log_avg_output_tokens=9.032048394629228, avg_output_tokens/L = 0.21984815043668263, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7776051661230635, avg_output_tokens: 8366.980909319267, delta: 1.692407265127846
delta: 1.692407265127846
provider 1: 计划委托次数 6737 (整数部分)
provider 1: 被委托了6737次: 收了provider_utility:885.0126532050001
provider 1: 小数部分触发，追加委托 1 次
狗运：provider 1  被委托了6737次: 收了provider_utility:0.13237611300000002 
for provider 2: log_avg_reward=-0.5133906649735803, log_avg_output_tokens=8.25945904044364, avg_output_tokens/L = 0.10152933064036938, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5984629474197943, avg_output_tokens: 3864.003265511178, delta: 2.3214611563173673
delta: 2.3214611563173673
provider 2: 计划委托次数 9241 (整数部分)
provider 2: 被委托了9241次: 收了provider_utility:1213.6016065770002
provider 2: 小数部分触发，追加委托 1 次
狗运：provider 2  被委托了9241次: 收了provider_utility:0.131617035 


====================Provider-0 History Info:==================
total input_tokens: 18208209.0
avg input_tokens: 2286.888847023361
total output_tokens: 86148257.0
avg output_tokens: 10819.92677719166
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 3052.9382212500004
avg reported_price: 0.38343861105877924
total costs: 172.092448881
avg costs: 0.021614223672569707
total rewards: 4298.060636679613
avg rewards: 0.5398217328158268
total user_utility: 1245.1224154296124
avg user_utility: 0.15638312175704752
total provider_utility: 2575.551950244
avg provider_utility: 0.3234805262803316


====================Provider-1 History Info:==================
total input_tokens: 2124855462.0
avg input_tokens: 2287.343790165798
total output_tokens: 7790864822.0
avg output_tokens: 8386.634568475352
total reported_output_tokens: 35236085648.0
avg reported_output_tokens: 37930.59958103776
total reported_price: 157376.11785940008
avg reported_price: 0.1694107163257486
total costs: 32703.196190840998
avg costs: 0.03520401931493538
total rewards: 720319.2621253686
avg rewards: 0.7754022900025712
total user_utility: 562943.144265969
avg user_utility: 0.6059915736768232
total provider_utility: 108935.30988261898
avg provider_utility: 0.11726562537823827


====================Provider-2 History Info:==================
total input_tokens: 39992137.0
avg input_tokens: 2324.5836433387585
total output_tokens: 158499088.0
avg output_tokens: 9212.920716112532
total reported_output_tokens: 518623531.0
avg reported_output_tokens: 30145.520285980005
total reported_price: 2325.9348871
avg reported_price: 0.13519733126598465
total costs: 356.47393880699997
avg costs: 0.02072041030033713
total rewards: 9531.518088928673
avg rewards: 0.5540291844297066
total user_utility: 7205.583201828673
avg user_utility: 0.41883185316372196
total provider_utility: 1736.8674595830003
avg provider_utility: 0.10095718783904907



====================phase3_utility_based end====================
