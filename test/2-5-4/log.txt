log to file test/2-5-4/log.txt, logger name is 2-5-4
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 2, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 5, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 4, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/2-5-4'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9247
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7387
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.3728
Provider 2 avg_provider_utility: 0.1313
  阶段1完成，最佳服务商：0，平均效用：0.9247
  第二好服务商1	 第二好效用：0.7387



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9212763.0
avg input_tokens: 2314.1831198191408
total output_tokens: 26228586.0
avg output_tokens: 6588.441597588546
total reported_output_tokens: 26228586.0
avg reported_output_tokens: 6588.441597588546
total reported_price: 273.80181375000006
avg reported_price: 0.0687771448756594
total costs: 246.421632375
avg costs: 0.061899430388093445
total rewards: 3954.9184200527707
avg rewards: 0.9934484853184553
total user_utility: 3681.1166063027704
avg user_utility: 0.9246713404427959
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9087198.0
avg input_tokens: 2282.6420497362474
total output_tokens: 33098635.0
avg output_tokens: 8314.150967093696
total reported_output_tokens: 33098635.0
avg reported_output_tokens: 8314.150967093696
total reported_price: 155.6299118
avg reported_price: 0.03909317050992213
total costs: 140.06692062000002
avg costs: 0.03518385345892992
total rewards: 3096.2348605129755
avg rewards: 0.7777530420781149
total user_utility: 2940.6049487129753
avg user_utility: 0.7386598715681928
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9107307.0
avg input_tokens: 2287.6932931424267
total output_tokens: 43205150.0
avg output_tokens: 10852.838482793268
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6571888999999
avg reported_price: 0.16997166262245667
total costs: 86.30487133199999
avg costs: 0.021679194004521476
total rewards: 2160.961369421709
avg rewards: 0.5428187313292412
total user_utility: 1484.304180521709
avg user_utility: 0.37284706870678447
total provider_utility: 522.686598678
avg provider_utility: 0.13129530235568954



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7778, avg_output_tokens=8314.15
Phase2 delta_3 components | provider 2: avg_reward=0.5428, avg_output_tokens=38058.00
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.653366950964696
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.653366950964696) * 3981 = 916661.1344142563
  计划委托916661次，阈值：0.6299
  早停触发：最近7962次平均用户效用 0.4316 < 阈值 0.6299
  在7962次委托后停止，总provider_utility：620.6794



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 27413757.0
avg input_tokens: 2295.3828183873397
total output_tokens: 111944422.0
avg output_tokens: 9373.224650422842
total reported_output_tokens: 111944422.0
avg reported_output_tokens: 9373.224650422842
total reported_price: 1153.7114162500002
avg reported_price: 0.09660147502721261
total costs: 417.66087037500006
avg costs: 0.03497118566314997
total rewards: 8271.156339252953
avg rewards: 0.6925526533746088
total user_utility: 7117.444923002955
avg user_utility: 0.5959511783473964
total provider_utility: 620.6794042500001
avg provider_utility: 0.05197014186134138


====================Provider-1 History Info:==================
total input_tokens: 9087198.0
avg input_tokens: 2282.6420497362474
total output_tokens: 33098635.0
avg output_tokens: 8314.150967093696
total reported_output_tokens: 33098635.0
avg reported_output_tokens: 8314.150967093696
total reported_price: 155.6299118
avg reported_price: 0.03909317050992213
total costs: 140.06692062000002
avg costs: 0.03518385345892992
total rewards: 3096.2348605129755
avg rewards: 0.7777530420781149
total user_utility: 2940.6049487129753
avg user_utility: 0.7386598715681928
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9107307.0
avg input_tokens: 2287.6932931424267
total output_tokens: 43205150.0
avg output_tokens: 10852.838482793268
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6571888999999
avg reported_price: 0.16997166262245667
total costs: 86.30487133199999
avg costs: 0.021679194004521476
total rewards: 2160.961369421709
avg rewards: 0.5428187313292412
total user_utility: 1484.304180521709
avg user_utility: 0.37284706870678447
total provider_utility: 522.686598678
avg provider_utility: 0.13129530235568954



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 27413757.0
avg input_tokens: 2295.3828183873397
total output_tokens: 111944422.0
avg output_tokens: 9373.224650422842
total reported_output_tokens: 111944422.0
avg reported_output_tokens: 9373.224650422842
total reported_price: 1153.7114162500002
avg reported_price: 0.09660147502721261
total costs: 417.66087037500006
avg costs: 0.03497118566314997
total rewards: 8271.156339252953
avg rewards: 0.6925526533746088
total user_utility: 7117.444923002955
avg user_utility: 0.5959511783473964
total provider_utility: 620.6794042500001
avg provider_utility: 0.05197014186134138


====================Provider-1 History Info:==================
total input_tokens: 18175980.0
avg input_tokens: 2282.8409947249434
total output_tokens: 76298029.0
avg output_tokens: 9582.771791007284
total reported_output_tokens: 184607533.0
avg reported_output_tokens: 23186.075483546847
total reported_price: 832.2667232
avg reported_price: 0.10452985722180357
total costs: 226.358112726
avg costs: 0.028429805667671438
total rewards: 5252.925762075402
avg rewards: 0.6597495305294402
total user_utility: 4420.659038875401
avg user_utility: 0.5552196733076364
total provider_utility: 522.681938154
avg provider_utility: 0.06564706583195178


====================Provider-2 History Info:==================
total input_tokens: 18225069.0
avg input_tokens: 2289.0064054257723
total output_tokens: 86368834.0
avg output_tokens: 10847.63049485054
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.3258783
avg reported_price: 0.16997310704596835
total costs: 172.529330508
avg costs: 0.02166909451243406
total rewards: 4296.494403562477
avg rewards: 0.5396250192869224
total user_utility: 2943.168525262477
avg user_utility: 0.3696519122409542
total provider_utility: 1045.463959962
avg provider_utility: 0.13130670182893744



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.006573070052322103, log_avg_output_tokens=8.793072119650436, avg_output_tokens/L = 0.1731158126435584, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9934484853184553, avg_output_tokens: 6588.441597588546, delta: 2.223079190028639
delta: 2.223079190028639
provider 0: 计划委托次数 8850 (整数部分)
provider 0: 被委托了8850次: 收了provider_utility:2862.4253356710005
for provider 1: log_avg_reward=-0.25134623182905724, log_avg_output_tokens=9.025714277825942, avg_output_tokens/L = 0.21846000754358336, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7777530420781149, avg_output_tokens: 8314.150967093696, delta: 1.7003196751763725
delta: 1.7003196751763725
provider 1: 计划委托次数 6768 (整数部分)
provider 1: 被委托了6768次: 收了provider_utility:889.017190929
provider 1: 小数部分触发，追加委托 1 次
狗运：provider 1  被委托了6768次: 收了provider_utility:0.14415437700000003 
for provider 2: log_avg_reward=-0.6109798429041577, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5428187313292412, avg_output_tokens: 38058.0, delta: -0.9620062413911548
delta: -0.9620062413911548
provider 2: delta<=0，不进行委托


====================Provider-0 History Info:==================
total input_tokens: 47663802.0
avg input_tokens: 2292.300389554177
total output_tokens: 207897826.0
avg output_tokens: 9998.45265233492
total reported_output_tokens: 448757722.0
avg reported_output_tokens: 21582.15370557399
total reported_price: 4547.156972500001
avg reported_price: 0.2186869125426827
total costs: 609.3365353290001
avg costs: 0.029304887958880397
total rewards: 13032.134516035021
avg rewards: 0.6267558561071044
total user_utility: 8484.97754353502
avg user_utility: 0.4080689435644217
total provider_utility: 3483.104739921
avg provider_utility: 0.167513333329534


====================Provider-1 History Info:==================
total input_tokens: 33623323.0
avg input_tokens: 2282.4874753920303
total output_tokens: 149529375.0
avg output_tokens: 10150.660172425498
total reported_output_tokens: 442222135.0
avg reported_output_tokens: 30019.831308125722
total reported_price: 1982.7630493
avg reported_price: 0.1345979939786844
total costs: 372.64346091000004
avg costs: 0.025296548836467318
total rewards: 8884.260379507865
avg rewards: 0.6030996116698027
total user_utility: 6901.497330207865
avg user_utility: 0.4685016176911184
total provider_utility: 1411.84328346
avg provider_utility: 0.09584164574434866


====================Provider-2 History Info:==================
total input_tokens: 18225069.0
avg input_tokens: 2289.0064054257723
total output_tokens: 86368834.0
avg output_tokens: 10847.63049485054
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.3258783
avg reported_price: 0.16997310704596835
total costs: 172.529330508
avg costs: 0.02166909451243406
total rewards: 4296.494403562477
avg rewards: 0.5396250192869224
total user_utility: 2943.168525262477
avg user_utility: 0.3696519122409542
total provider_utility: 1045.463959962
avg provider_utility: 0.13130670182893744



====================phase3_utility_based end====================
