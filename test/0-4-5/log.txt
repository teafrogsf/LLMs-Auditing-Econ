log to file test/0-4-5/log.txt, logger name is 0-4-5
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 0, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 4, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 5, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/0-4-5'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [1, 2, 0]
Provider 0 avg_user_utility: 0.9221
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.3687
Provider 1 avg_provider_utility: 0.1313
Provider 2 avg_user_utility: 0.5814
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9221
  第二好服务商2	 第二好效用：0.5814



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9182554.0
avg input_tokens: 2306.5948254207487
total output_tokens: 26154927.0
avg output_tokens: 6569.938960060286
total reported_output_tokens: 26154927.0
avg reported_output_tokens: 6569.938960060286
total reported_price: 273.02746250000007
avg reported_price: 0.06858263313237882
total costs: 245.72471625000003
avg costs: 0.06172436981914093
total rewards: 3944.095895830069
avg rewards: 0.9907299411781133
total user_utility: 3671.068433330069
avg user_utility: 0.9221473080457345
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9096987.0
avg input_tokens: 2285.1009796533535
total output_tokens: 43240726.0
avg output_tokens: 10861.77493092188
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6458369
avg reported_price: 0.1699688110776187
total costs: 86.37369130799999
avg costs: 0.021696481112283342
total rewards: 2144.534279363448
avg rewards: 0.5386923585439458
total user_utility: 1467.888442463448
avg user_utility: 0.3687235474663271
total provider_utility: 522.607561902
avg provider_utility: 0.13127544885757347


====================Provider-2 History Info:==================
total input_tokens: 9778862.0
avg input_tokens: 2456.3833207736748
total output_tokens: 15300676.0
avg output_tokens: 3843.425270032655
total reported_output_tokens: 15300676.0
avg reported_output_tokens: 3843.425270032655
total reported_price: 78.0797226
avg reported_price: 0.019613092840994724
total costs: 70.27175034000001
avg costs: 0.017651783556895256
total rewards: 2392.623381507041
avg rewards: 0.601010645944999
total user_utility: 2314.5436589070405
avg user_utility: 0.5813975531040041
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.5387, avg_output_tokens=38058.00
Phase2 delta_3 components | provider 2: avg_reward=0.6010, avg_output_tokens=3843.43
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -21.029727731253587
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -21.029727731253587) * 3981 = 914178.4266805864
  计划委托914178次，阈值：0.4726
  在914178次委托后停止，总provider_utility：256103.1915
 奖励在3981次委托后停止，总provider utility：1287.6792



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 2136759879.0
avg input_tokens: 2317.175135012037
total output_tokens: 6134853384.0
avg output_tokens: 6652.843802459496
total reported_output_tokens: 34699146880.0
avg reported_output_tokens: 37628.935823193875
total reported_price: 349662.41864875
avg reported_price: 0.3791858271507038
total costs: 57305.30604306299
avg costs: 0.06214382419487604
total rewards: 912323.2476780942
avg rewards: 0.9893543796799772
total user_utility: 562660.8290293436
avg user_utility: 0.6101685525292727
total provider_utility: 257390.870740812
avg provider_utility: 0.27912342024075737


====================Provider-1 History Info:==================
total input_tokens: 9096987.0
avg input_tokens: 2285.1009796533535
total output_tokens: 43240726.0
avg output_tokens: 10861.77493092188
total reported_output_tokens: 151508898.0
avg reported_output_tokens: 38058.0
total reported_price: 676.6458369
avg reported_price: 0.1699688110776187
total costs: 86.37369130799999
avg costs: 0.021696481112283342
total rewards: 2144.534279363448
avg rewards: 0.5386923585439458
total user_utility: 1467.888442463448
avg user_utility: 0.3687235474663271
total provider_utility: 522.607561902
avg provider_utility: 0.13127544885757347


====================Provider-2 History Info:==================
total input_tokens: 9778862.0
avg input_tokens: 2456.3833207736748
total output_tokens: 15300676.0
avg output_tokens: 3843.425270032655
total reported_output_tokens: 15300676.0
avg reported_output_tokens: 3843.425270032655
total reported_price: 78.0797226
avg reported_price: 0.019613092840994724
total costs: 70.27175034000001
avg costs: 0.017651783556895256
total rewards: 2392.623381507041
avg rewards: 0.601010645944999
total user_utility: 2314.5436589070405
avg user_utility: 0.5813975531040041
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 2136759879.0
avg input_tokens: 2317.175135012037
total output_tokens: 6134853384.0
avg output_tokens: 6652.843802459496
total reported_output_tokens: 34699146880.0
avg reported_output_tokens: 37628.935823193875
total reported_price: 349662.41864875
avg reported_price: 0.3791858271507038
total costs: 57305.30604306299
avg costs: 0.06214382419487604
total rewards: 912323.2476780942
avg rewards: 0.9893543796799772
total user_utility: 562660.8290293436
avg user_utility: 0.6101685525292727
total provider_utility: 257390.870740812
avg provider_utility: 0.27912342024075737


====================Provider-1 History Info:==================
total input_tokens: 18199224.0
avg input_tokens: 2285.760361718161
total output_tokens: 86469420.0
avg output_tokens: 10860.263752825924
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2974488
avg reported_price: 0.16996953639788998
total costs: 172.72432904399997
avg costs: 0.02169358566239638
total rewards: 4297.077366789651
avg rewards: 0.5396982374767209
total user_utility: 2943.77991798965
avg user_utility: 0.3697287010788307
total provider_utility: 1045.243374876
avg provider_utility: 0.1312789970957046


====================Provider-2 History Info:==================
total input_tokens: 18881489.0
avg input_tokens: 2371.4505149459933
total output_tokens: 58621850.0
avg output_tokens: 7362.704094448631
total reported_output_tokens: 166809574.0
avg reported_output_tokens: 20950.712635016327
total reported_price: 754.7317634999999
avg reported_price: 0.09479173116051243
total costs: 156.80471529599998
avg costs: 0.01969413656066315
total rewards: 4580.616774607063
avg rewards: 0.575309818463585
total user_utility: 3825.8850111070633
avg user_utility: 0.4805180873030725
total provider_utility: 522.453871854
avg provider_utility: 0.06561842148379804



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.009313293214843608, log_avg_output_tokens=8.7902598207293, avg_output_tokens/L = 0.1726296431777888, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9907299411781133, avg_output_tokens: 6569.938960060286, delta: 2.223637435253023
delta: 2.223637435253023
provider 0: 计划委托次数 8852 (整数部分)
provider 0: 被委托了8852次: 收了provider_utility:2862.8766310590004
for provider 1: log_avg_reward=-0.6186106343898604, log_avg_output_tokens=10.546866590861953, avg_output_tokens/L = 1.0, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.5386923585439458, avg_output_tokens: 38058.0, delta: -0.9696370328768573
delta: -0.9696370328768573
provider 1: delta<=0，不进行委托
for provider 2: log_avg_reward=-0.5091426308850152, log_avg_output_tokens=8.254119245392843, avg_output_tokens/L = 0.10098862972391232, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.601010645944999, avg_output_tokens: 3843.425270032655, delta: 2.331589686373184
delta: 2.331589686373184
provider 2: 计划委托次数 9282 (整数部分)
provider 2: 被委托了9282次: 收了provider_utility:1218.3209175690001


====================Provider-0 History Info:==================
total input_tokens: 2157001103.0
avg input_tokens: 2316.8846810713735
total output_tokens: 6230920911.0
avg output_tokens: 6692.775997001048
total reported_output_tokens: 35036036296.0
avg reported_output_tokens: 37633.01542440752
total reported_price: 353056.61433874996
avg reported_price: 0.3792262600954143
total costs: 57497.205533003995
avg costs: 0.06175907583846477
total rewards: 917067.501668791
avg rewards: 0.9850433748826961
total user_utility: 564010.8873300403
avg user_utility: 0.6058171147872811
total provider_utility: 260253.747371871
avg provider_utility: 0.27954455824740815


====================Provider-1 History Info:==================
total input_tokens: 18199224.0
avg input_tokens: 2285.760361718161
total output_tokens: 86469420.0
avg output_tokens: 10860.263752825924
total reported_output_tokens: 303017796.0
avg reported_output_tokens: 38058.0
total reported_price: 1353.2974488
avg reported_price: 0.16996953639788998
total costs: 172.72432904399997
avg costs: 0.02169358566239638
total rewards: 4297.077366789651
avg rewards: 0.5396982374767209
total user_utility: 2943.77991798965
avg user_utility: 0.3697287010788307
total provider_utility: 1045.243374876
avg provider_utility: 0.1312789970957046


====================Provider-2 History Info:==================
total input_tokens: 40121258.0
avg input_tokens: 2326.6793087450706
total output_tokens: 159543967.0
avg output_tokens: 9252.143760148458
total reported_output_tokens: 520063930.0
avg reported_output_tokens: 30159.123753189517
total reported_price: 2332.4146758
avg reported_price: 0.13525949175365345
total costs: 358.398418797
avg costs: 0.020783949129958245
total rewards: 9525.754055812724
avg rewards: 0.5524097689522572
total user_utility: 7193.339380012724
avg user_utility: 0.4171502771986038
total provider_utility: 1740.774789423
avg provider_utility: 0.10094959344832985



====================phase3_utility_based end====================
