log to file test/3-3-3/log.txt, logger name is 3-3-3
{'gamma': 3.0, 'reward_param': 1.0, 'providers': [{'id': 0, 'num_models': 3, 'eta': 0.9, 'models': ['gpt-5-high', 'deepseek-r1', 'gpt-5-medium'], 'strategy': 3, 'reward_param': 1.0}, {'id': 1, 'num_models': 3, 'eta': 0.9, 'models': ['o3-mini', 'o1-mini', 'deepseek-r1'], 'strategy': 3, 'reward_param': 1.0}, {'id': 2, 'num_models': 3, 'eta': 0.9, 'models': ['claude-4-0', 'o1-mini', 'deepseek-r1'], 'strategy': 3, 'reward_param': 1.0}], 'path': 'config/nl_graph/yuhan1.yaml', 'eps': 0.3, 'num_tasks': 1000000.0, 'B': 3981, 'K': 3, 'M': 0.23637291771156435, 'output_dir': 'test/3-3-3'}
init provider 0
['gpt-5-medium', 'gpt-5-high', 'deepseek-r1']
init provider 1
['o3-mini', 'o1-mini', 'deepseek-r1']
init provider 2
['o1-mini', 'claude-4-0', 'deepseek-r1']
L is 38058
delta_1=11.1958, delta_2=0.0000
====================Stage1: Delegate each provider 3981 Times====================
Delegate provider 0 3981 tasks.
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.
Providers sorted by avg_user_utility: [2, 1, 0]
Provider 0 avg_user_utility: 0.9229
Provider 0 avg_provider_utility: 0.0000
Provider 1 avg_user_utility: 0.7400
Provider 1 avg_provider_utility: 0.0000
Provider 2 avg_user_utility: 0.5670
Provider 2 avg_provider_utility: 0.0000
  阶段1完成，最佳服务商：0，平均效用：0.9229
  第二好服务商1	 第二好效用：0.7400



====================phase1_exploration end====================


====================Provider-0 History Info:==================
total input_tokens: 9165865.0
avg input_tokens: 2302.402662647576
total output_tokens: 26466022.0
avg output_tokens: 6648.083898517961
total reported_output_tokens: 26466022.0
avg reported_output_tokens: 6648.083898517961
total reported_price: 276.11755125
avg reported_price: 0.06935884231348907
total costs: 248.50579612500002
avg costs: 0.06242295808214017
total rewards: 3950.277512420501
avg rewards: 0.9922827210300178
total user_utility: 3674.159961170501
avg user_utility: 0.9229238787165288
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-1 History Info:==================
total input_tokens: 9088263.0
avg input_tokens: 2282.9095704596834
total output_tokens: 33642754.0
avg output_tokens: 8450.829942225571
total reported_output_tokens: 33642754.0
avg reported_output_tokens: 8450.829942225571
total reported_price: 158.0252069
avg reported_price: 0.039694852273298165
total costs: 142.22268621000003
avg costs: 0.035725367045968355
total rewards: 3104.024123140054
avg rewards: 0.7797096516302573
total user_utility: 2945.9989162400543
avg user_utility: 0.7400147993569591
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9774878.0
avg input_tokens: 2455.382567194172
total output_tokens: 15435832.0
avg output_tokens: 3877.375533785481
total reported_output_tokens: 15435832.0
avg reported_output_tokens: 3877.375533785481
total reported_price: 78.6700266
avg reported_price: 0.019761373172569707
total costs: 70.80302394
avg costs: 0.017785235855312737
total rewards: 2335.837686677588
avg rewards: 0.5867464673894971
total user_utility: 2257.1676600775877
avg user_utility: 0.5669850942169273
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_exploitation start====================
后面的东西是：0.10877724091141051
Phase2 delta_3 components | provider 1: avg_reward=0.7797, avg_output_tokens=8450.83
Phase2 delta_3 components | provider 2: avg_reward=0.5867, avg_output_tokens=3877.38
delta_1 = 11.195840192374956
delta_2 = 0.0
delta_3 = -18.41086190079259
R = T - ((delta_1 + 3) * K + delta_2 + delta_3) * B = 1000000 - ((11.195840192374956 + 3) * 3 + 0.0 + -18.41086190079259) * 3981 = 903752.7218095212
  计划委托903752次，阈值：0.6312
  早停触发：最近7962次平均用户效用 0.6091 < 阈值 0.6312
  在7962次委托后停止，总provider_utility：2251.0558



====================phase2_exploitation end====================


====================Provider-0 History Info:==================
total input_tokens: 27604773.0
avg input_tokens: 2311.376789751319
total output_tokens: 79366504.0
avg output_tokens: 6645.441178933266
total reported_output_tokens: 329483818.0
avg reported_output_tokens: 27588.027966172653
total reported_price: 3329.3441462500004
avg reported_price: 0.2787695006489157
total costs: 745.3539056250002
avg costs: 0.06240926949886964
total rewards: 11853.147104500533
avg rewards: 0.9924765221887744
total user_utility: 8523.802958250533
avg user_utility: 0.7137070215398588
total provider_utility: 2251.0558260000003
avg provider_utility: 0.1884832810851545


====================Provider-1 History Info:==================
total input_tokens: 9088263.0
avg input_tokens: 2282.9095704596834
total output_tokens: 33642754.0
avg output_tokens: 8450.829942225571
total reported_output_tokens: 33642754.0
avg reported_output_tokens: 8450.829942225571
total reported_price: 158.0252069
avg reported_price: 0.039694852273298165
total costs: 142.22268621000003
avg costs: 0.035725367045968355
total rewards: 3104.024123140054
avg rewards: 0.7797096516302573
total user_utility: 2945.9989162400543
avg user_utility: 0.7400147993569591
total provider_utility: 0.0
avg provider_utility: 0.0


====================Provider-2 History Info:==================
total input_tokens: 9774878.0
avg input_tokens: 2455.382567194172
total output_tokens: 15435832.0
avg output_tokens: 3877.375533785481
total reported_output_tokens: 15435832.0
avg reported_output_tokens: 3877.375533785481
total reported_price: 78.6700266
avg reported_price: 0.019761373172569707
total costs: 70.80302394
avg costs: 0.017785235855312737
total rewards: 2335.837686677588
avg rewards: 0.5867464673894971
total user_utility: 2257.1676600775877
avg user_utility: 0.5669850942169273
total provider_utility: 0.0
avg provider_utility: 0.0



====================phase2_incentive start====================
====================Stage2 Incentive: Delegate non-best providers 3981 Times each====================
Delegate provider 1 3981 tasks.
Delegate provider 2 3981 tasks.


====================Provider-0 History Info:==================
total input_tokens: 27604773.0
avg input_tokens: 2311.376789751319
total output_tokens: 79366504.0
avg output_tokens: 6645.441178933266
total reported_output_tokens: 329483818.0
avg reported_output_tokens: 27588.027966172653
total reported_price: 3329.3441462500004
avg reported_price: 0.2787695006489157
total costs: 745.3539056250002
avg costs: 0.06240926949886964
total rewards: 11853.147104500533
avg rewards: 0.9924765221887744
total user_utility: 8523.802958250533
avg user_utility: 0.7137070215398588
total provider_utility: 2251.0558260000003
avg provider_utility: 0.1884832810851545


====================Provider-1 History Info:==================
total input_tokens: 18178920.0
avg input_tokens: 2283.210248681236
total output_tokens: 76596472.0
avg output_tokens: 9620.255212258227
total reported_output_tokens: 185151652.0
avg reported_output_tokens: 23254.414971112787
total reported_price: 834.6640808
avg reported_price: 0.10483095714644561
total costs: 228.02988717000002
avg costs: 0.028639774826676716
total rewards: 5279.002975707774
avg rewards: 0.6630247394759826
total user_utility: 4444.338894907774
avg user_utility: 0.5581937823295371
total provider_utility: 523.16778555
avg provider_utility: 0.06570808660512434


====================Provider-2 History Info:==================
total input_tokens: 18882425.0
avg input_tokens: 2371.568073348405
total output_tokens: 58448106.0
avg output_tokens: 7340.882441597589
total reported_output_tokens: 166944730.0
avg reported_output_tokens: 20967.68776689274
total reported_price: 755.3274795
avg reported_price: 0.0948665510550113
total costs: 156.727766916
avg costs: 0.01968447210700829
total rewards: 4498.039212075542
avg rewards: 0.5649383587133311
total user_utility: 3742.711732575542
avg user_utility: 0.4700718076583198
total provider_utility: 523.066964634
avg provider_utility: 0.06569542384250188



====================phase2_incentive end====================



====================phase3_utility_based start====================
for provider 0: log_avg_reward=-0.0077472112640209765, log_avg_output_tokens=8.802083956569664, avg_output_tokens/L = 0.1746829549245352, L=38058
delta_1=11.195840192374956
for provider 0: avg_reward:0.9922827210300178, avg_output_tokens: 6648.083898517961, delta: 2.2113260696167347
delta: 2.2113260696167347
provider 0: 计划委托次数 8803 (整数部分)
provider 0: 被委托了8803次: 收了provider_utility:2847.2881080780003
for provider 1: log_avg_reward=-0.24883367009723467, log_avg_output_tokens=9.042019933543006, avg_output_tokens/L = 0.22205134116941436, L=38058
delta_1=11.195840192374956
for provider 1: avg_reward:0.7797096516302573, avg_output_tokens: 8450.829942225571, delta: 1.682935247565301
delta: 1.682935247565301
provider 1: 计划委托次数 6699 (整数部分)
provider 1: 被委托了6699次: 收了provider_utility:879.426385929
provider 1: 小数部分触发，追加委托 1 次
狗运：provider 1  被委托了6699次: 收了provider_utility:0.139086639 
for provider 2: log_avg_reward=-0.5331624649090991, log_avg_output_tokens=8.262913794931489, avg_output_tokens/L = 0.10188069614234802, L=38058
delta_1=11.195840192374956
for provider 2: avg_reward:0.5867464673894971, avg_output_tokens: 3877.375533785481, delta: 2.29788323639202
delta: 2.29788323639202
provider 2: 计划委托次数 9147 (整数部分)
provider 2: 被委托了9147次: 收了provider_utility:1201.494897351


====================Provider-0 History Info:==================
total input_tokens: 47714179.0
avg input_tokens: 2299.9218644557986
total output_tokens: 174760900.0
avg output_tokens: 8423.835920177384
total reported_output_tokens: 664508392.0
avg reported_output_tokens: 32030.675407307433
total reported_price: 6704.72664375
avg reported_price: 0.3231816564036441
total costs: 935.910045297
avg costs: 0.04511279501094187
total rewards: 16539.876869523298
avg rewards: 0.7972561876758555
total user_utility: 9835.150225773295
avg user_utility: 0.4740745312722113
total provider_utility: 5098.3439340780005
avg provider_utility: 0.24575069575233782


====================Provider-1 History Info:==================
total input_tokens: 33517360.0
avg input_tokens: 2286.0019096985407
total output_tokens: 149372624.0
avg output_tokens: 10187.738644114037
total reported_output_tokens: 440140252.0
avg reported_output_tokens: 30019.114172691312
total reported_price: 1973.4862048
avg reported_price: 0.13459870446051017
total costs: 373.404326202
avg costs: 0.025467489169417542
total rewards: 8892.270021018252
avg rewards: 0.6064841100135215
total user_utility: 6918.7838162182525
avg user_utility: 0.47188540555301134
total provider_utility: 1402.733258118
avg provider_utility: 0.09567134484504161


====================Provider-2 History Info:==================
total input_tokens: 39774224.0
avg input_tokens: 2324.754456718686
total output_tokens: 157431901.0
avg output_tokens: 9201.700917645683
total reported_output_tokens: 515061256.0
avg reported_output_tokens: 30104.69670933427
total reported_price: 2310.0211728000004
avg reported_price: 0.13501789542346135
total costs: 354.45719353500004
avg costs: 0.020717586856917415
total rewards: 9556.992825074198
avg rewards: 0.5585944722119468
total user_utility: 7246.971652274198
avg user_utility: 0.4235765767884855
total provider_utility: 1724.5618619849997
avg provider_utility: 0.10079851902419777



====================phase3_utility_based end====================
